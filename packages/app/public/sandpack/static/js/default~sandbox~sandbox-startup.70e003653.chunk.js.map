{"version":3,"sources":["webpack:///./src/sandbox/eval/transpilers/babel/worker/index.ts","webpack:///../codesandbox-api/dist/codesandbox.es5.js","webpack:///../common/lib/templates/helpers/is-server.js","webpack:///../common/lib/utils/url-generator.js","webpack:///../common/lib/utils/url-generator/dashboard.js","webpack:///../sandbox-hooks/preview-secret.js"],"names":["module","exports","Worker","transformers","transformError","error","modules","map","c","filter","x","clearErrorTransformers","length","registerErrorTransformer","check","push","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","this","n","v","op","TypeError","call","pop","generateId","Math","floor","random","Protocol","type","handleMessage","target","_this","outgoingMessages","Set","_messageListener","data","returnMessage","_a","$type","getTypeId","has","$id","$data","$originId","internalId","source","postMessage","_postMessage","createConnection","isWorker","constructor","name","getConstructorName","prototype","self","addEventListener","dispose","removeEventListener","sendMessage","messageId","message","add","listenFunction","m","DedicatedWorkerGlobalScope","notifications","Object","freeze","show","title","notificationType","timeAlive","action","editor","openModule","id","lineNumber","column","path","dependencies","dependencyName","dependency","rename","actions","line","lineEnd","columnEnd","payload","severity","clear","correction","_b","_c","_d","glyph","className","host$1","process","__assign","assign","s","i","arguments","p","hasOwnProperty","bundlers","Map","resolveIframeHandshake","isStandalone","window","location","href","indexOf","opener","parent","iframeHandshakeDone","iframeHandshake","parentOrigin","parentId","parentOriginListener","origin","resetState","dispatch","newMessage","codesandbox","notifyListeners","rawMessage","JSON","parse","stringify","forEach","frame","notifyFrames","listeners","listenerId","listen","callback","keys","eventListener","registerFrame","bundlerId","set","document","reattach","defineProperty","isServer","SERVER_TEMPLATE_NAMES","template","__createBinding","create","o","k","k2","undefined","enumerable","get","__setModuleDefault","__importStar","mod","__esModule","dashboard","teamInviteLink","getSandboxId","privacyUrl","tosUrl","curatorUrl","patronUrl","searchUrl","gitHubToSandboxUrl","optionsToParameterizedUrl","githubRepoUrl","profileLikesUrl","profileSandboxesUrl","teamOverviewUrl","exploreUrl","dashboardUrl","profileUrl","signInVercelUrl","signInUrl","signInPageUrl","forkSandboxUrl","frameUrl","embedUrl","sandboxUrl","editorUrl","uploadFromCliUrl","newCxJSSandboxUrl","newAngularSandboxUrl","newSvelteSandboxUrl","importFromGitHubUrl","newVueSandboxUrl","newPreactSandboxUrl","newDojoSandboxUrl","newReactTypeScriptSandboxUrl","parcelSandboxUrl","newSandboxUrl","newSandboxWizard","protocolAndHost","host","gitHubRepoPattern","is_server_1","gitHubPrefix","dotGit","sandboxHost","buildEncodedUri","strings","values","encodeURIComponent","join","split","protocol","sandboxGitUrl","git","username","repo","branch","sandboxDetails","alias","sandbox","append","useFallbackDomain","port","substr","templateIsServer","sHost","redirectTo","url","extraScopes","teamId","page","options","keyValues","sort","a","key","githubUrl","replace","query","csbHost","Boolean","tryHost","hostRegex","sandboxRegex","RegExp","matches","match","Error","inviteToken","appendTeamIdQueryParam","discoverSearch","discover","search","createTeam","teamInvite","permissionSettings","registrySettings","settings","home","liked","shared","deleted","recents","templates","alwaysOn","repos","drafts","allSandboxes","ALL_SANDBOXES_URL_PREFIX","DASHBOARD_URL_PREFIX","sanitizePath","includes","albumId","getPreviewSecret","cookie","setPreviewSecret","secret","cookieValue","setTimeout","reload","getPopupDimensions","width","height","wLeft","screenLeft","screenX","wTop","screenTop","screenY","left","innerWidth","top","innerHeight","getPopupOffset","listener","previewSecret","sandboxId","endsWith","popup","open","setInterval","close"],"mappings":"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","file":"static/js/default~sandbox~sandbox-startup.70e003653.chunk.js","sourcesContent":["module.exports = function() {\n  return new Worker(\"/sandpack/\" + \"babel-transpiler.e0c84354.worker.js\");\n};","var transformers = [];\nfunction transformError(error, module, modules) {\n    var transformedErrors = transformers.map(function (c) { return c(error, module, modules); }).filter(function (x) { return x != null; });\n    return transformedErrors[0];\n}\nfunction clearErrorTransformers() {\n    transformers.length = 0;\n}\nfunction registerErrorTransformer(check) {\n    transformers.push(check);\n}\n\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar generateId = function () {\n    // Such a random ID\n    return Math.floor(Math.random() * 1000000 + Math.random() * 1000000);\n};\nvar getConstructorName = function (x) {\n    try {\n        return x.constructor.name;\n    }\n    catch (e) {\n        return '';\n    }\n};\nvar Protocol = /** @class */ (function () {\n    function Protocol(type, handleMessage, target) {\n        var _this = this;\n        this.type = type;\n        this.handleMessage = handleMessage;\n        this.target = target;\n        this.outgoingMessages = new Set();\n        this._messageListener = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            var data, result, returnMessage;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        data = e.data;\n                        if (data.$type !== this.getTypeId()) {\n                            return [2 /*return*/];\n                        }\n                        // We are getting a response to the message\n                        if (this.outgoingMessages.has(data.$id)) {\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, this.handleMessage(data.$data)];\n                    case 1:\n                        result = _a.sent();\n                        returnMessage = {\n                            $originId: this.internalId,\n                            $type: this.getTypeId(),\n                            $data: result,\n                            $id: data.$id,\n                        };\n                        if (e.source) {\n                            // @ts-ignore\n                            e.source.postMessage(returnMessage, '*');\n                        }\n                        else {\n                            this._postMessage(returnMessage);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        this.createConnection();\n        this.internalId = generateId();\n        this.isWorker = getConstructorName(target) === 'Worker';\n    }\n    Protocol.prototype.getTypeId = function () {\n        return \"p-\" + this.type;\n    };\n    Protocol.prototype.createConnection = function () {\n        self.addEventListener('message', this._messageListener);\n    };\n    Protocol.prototype.dispose = function () {\n        self.removeEventListener('message', this._messageListener);\n    };\n    Protocol.prototype.sendMessage = function (data) {\n        var _this = this;\n        return new Promise(function (resolve) {\n            var messageId = generateId();\n            var message = {\n                $originId: _this.internalId,\n                $type: _this.getTypeId(),\n                $data: data,\n                $id: messageId,\n            };\n            _this.outgoingMessages.add(messageId);\n            var listenFunction = function (e) {\n                var data = e.data;\n                if (data.$type === _this.getTypeId() &&\n                    data.$id === messageId &&\n                    data.$originId !== _this.internalId) {\n                    resolve(data.$data);\n                    self.removeEventListener('message', listenFunction);\n                }\n            };\n            self.addEventListener('message', listenFunction);\n            _this._postMessage(message);\n        });\n    };\n    Protocol.prototype._postMessage = function (m) {\n        if (this.isWorker ||\n            // @ts-ignore Unknown to TS\n            (typeof DedicatedWorkerGlobalScope !== 'undefined' &&\n                // @ts-ignore Unknown to TS\n                this.target instanceof DedicatedWorkerGlobalScope)) {\n            // @ts-ignore\n            this.target.postMessage(m);\n        }\n        else {\n            this.target.postMessage(m, '*');\n        }\n    };\n    return Protocol;\n}());\n\n/**\n * Returns an action that describes to open a notification in the editor\n *\n * @export\n * @param {string} title\n * @param {('notice' | 'warning' | 'error' | 'success')} [notificationType='notice']\n * @param {number} [timeAlive=2] How long the notification should show in seconds\n * @returns {NotificationAction}\n */\nfunction show(title, notificationType, timeAlive) {\n    if (notificationType === void 0) { notificationType = 'notice'; }\n    if (timeAlive === void 0) { timeAlive = 2; }\n    // TODO automatically add type: 'action', maybe do this after conversion to TS\n    return {\n        type: 'action',\n        action: 'notification',\n        title: title,\n        notificationType: notificationType,\n        timeAlive: timeAlive,\n    };\n}\n\n\nvar notifications = Object.freeze({\n\tshow: show\n});\n\nfunction openModule(id, lineNumber, column) {\n    // TODO automatically add type: 'action', maybe do this after conversion to TS\n    return {\n        type: 'action',\n        action: 'editor.open-module',\n        path: id,\n        lineNumber: lineNumber,\n        column: column,\n    };\n}\n\n\nvar editor = Object.freeze({\n\topenModule: openModule\n});\n\nfunction add(dependencyName) {\n    return {\n        type: 'action',\n        action: 'source.dependencies.add',\n        dependency: dependencyName,\n    };\n}\n\n\nvar d = Object.freeze({\n\tadd: add\n});\n\nfunction rename(path, title) {\n    return {\n        type: 'action',\n        action: 'source.module.rename',\n        path: path,\n        title: title,\n    };\n}\n\n\nvar m = Object.freeze({\n\trename: rename\n});\n\nvar dependencies = d;\nvar modules = m;\n\n\nvar source = Object.freeze({\n\tdependencies: dependencies,\n\tmodules: modules\n});\n\n/**\n * Returns an action that describes to show an error\n * in the code of the editor (with the red squiggles)\n *\n * @export\n * @param {string} title\n * @param {string} message\n * @param {ErrorOptions} { line, column, path, payload }\n * @returns {ErrorAction}\n */\nfunction show$1(title, message, _a) {\n    var line = _a.line, column = _a.column, lineEnd = _a.lineEnd, columnEnd = _a.columnEnd, path = _a.path, payload = _a.payload, source = _a.source;\n    return {\n        title: title,\n        message: message,\n        line: line,\n        column: column,\n        path: path,\n        payload: payload,\n        lineEnd: lineEnd,\n        columnEnd: columnEnd,\n        severity: 'error',\n        type: 'action',\n        action: 'show-error',\n        source: source || 'browser',\n    };\n}\nfunction clear(path, source) {\n    return {\n        type: 'action',\n        action: 'clear-errors',\n        path: path,\n        source: source,\n    };\n}\n\n\nvar error = Object.freeze({\n\tshow: show$1,\n\tclear: clear\n});\n\n/**\n * Returns an action that describes to show a correction\n * in the code of the editor (with the yellow/blue squiggles)\n *\n * @export\n * @param {string} title\n * @param {string} message\n * @param {CorrectionOptions} { line, column, payload }\n * @returns {CorrectionAction}\n */\nfunction show$2(message, _a) {\n    var _b = _a === void 0 ? {\n        path: '',\n        severity: 'warning',\n        source: '',\n    } : _a, line = _b.line, column = _b.column, lineEnd = _b.lineEnd, columnEnd = _b.columnEnd, path = _b.path, payload = _b.payload, _c = _b.severity, severity = _c === void 0 ? 'warning' : _c, _d = _b.source, source = _d === void 0 ? '' : _d;\n    return {\n        message: message,\n        line: line,\n        column: column,\n        lineEnd: lineEnd,\n        columnEnd: columnEnd,\n        path: path,\n        payload: payload,\n        severity: severity,\n        source: source,\n        type: 'action',\n        action: 'show-correction',\n    };\n}\nfunction clear$1(path, source) {\n    return {\n        type: 'action',\n        action: 'clear-corrections',\n        path: path,\n        source: source,\n    };\n}\n\n\nvar correction = Object.freeze({\n\tshow: show$2,\n\tclear: clear$1\n});\n\n/**\n * Returns an action that describes to show a correction\n * in the code of the editor (with the yellow/blue squiggles)\n *\n * @export\n * @param {string} title\n * @param {string} message\n * @param {CorrectionOptions} { line, column, payload }\n * @returns {CorrectionAction}\n */\nfunction show$3(_a) {\n    var line = _a.line, path = _a.path, className = _a.className;\n    return {\n        line: line,\n        path: path,\n        className: className,\n        type: 'action',\n        action: 'show-glyph',\n    };\n}\n\n\nvar glyph = Object.freeze({\n\tshow: show$3\n});\n\n// All actions of the editor are defined here. The sandbox can send messages\n// like `source.files.rename` which the editor will see as an action to rename\n// a module. This will allow plugins to alter project content in the future\nvar actions = {\n    notifications: notifications,\n    editor: editor,\n    source: source,\n    error: error,\n    correction: correction,\n    glyph: glyph,\n};\n\nvar host = typeof process !== 'undefined' && process.env.CODESANDBOX_HOST;\nvar host$1 = host || 'https://codesandbox.io';\n\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// import * as debug from 'debug';\nvar bundlers = new Map();\nfunction checkIsStandalone() {\n    if (typeof window === 'undefined') {\n        return true;\n    }\n    if (window.location && window.location.href.indexOf('?standalone') > -1) {\n        return true;\n    }\n    if (window.opener || window.parent !== window) {\n        if (window.location && window.location.href.indexOf(host$1) > -1) {\n            // If this location href is codesandbox.io or something, we're most probably in an embed\n            // iframed on another page. This means that we're actually standalone, but we're fooled\n            // by the fact that we're embedded somewhere else.\n            return true;\n        }\n        return false;\n    }\n    return true;\n}\n// Whether the tab has a connection with the editor\nvar isStandalone = checkIsStandalone();\nvar resolveIframeHandshake;\nvar iframeHandshakeDone = false;\n/**\n * Resolves when the handshake between the frame and the editor has succeeded\n */\nvar iframeHandshake = new Promise(function (resolve) {\n    resolveIframeHandshake = resolve;\n});\n// Field used by a \"child\" frame to determine its parent origin\nvar parentOrigin = null;\nvar parentId = null;\nvar parentOriginListener = function (e) {\n    var _a;\n    if (e.data.type === 'register-frame' && !parentId) {\n        parentOrigin = e.data.origin;\n        parentId = (_a = e.data.id) !== null && _a !== void 0 ? _a : null;\n        if (!iframeHandshakeDone) {\n            resolveIframeHandshake();\n            iframeHandshakeDone = true;\n        }\n        self.removeEventListener('message', parentOriginListener);\n    }\n};\nif (typeof window !== 'undefined') {\n    self.addEventListener('message', parentOriginListener);\n}\nfunction resetState() {\n    parentOrigin = null;\n    bundlers.clear();\n}\n/**\n * Send a message to the editor, this is most probably an action you generated\n *\n * @export\n * @param {*} message\n * @returns\n */\nfunction dispatch(message) {\n    if (!message)\n        return;\n    var newMessage = __assign(__assign({}, message), { codesandbox: true });\n    if (parentId !== null) {\n        newMessage.$id = parentId;\n    }\n    notifyListeners(newMessage);\n    notifyFrames(newMessage);\n    if (isStandalone)\n        return;\n    if (parentOrigin === null && message.type !== 'initialized')\n        return;\n    if (window.opener) {\n        window.opener.postMessage(newMessage, parentOrigin === null ? '*' : parentOrigin);\n    }\n    else {\n        window.parent.postMessage(newMessage, parentOrigin === null ? '*' : parentOrigin);\n    }\n}\nvar listeners = {};\nvar listenerId = 0;\n/**\n * Listen to everything that comes in from either the editor or the sandbox\n * @param callback Call this function to 'unlisten'\n */\nfunction listen(callback) {\n    var id = ++listenerId;\n    listeners[id] = callback;\n    return function () {\n        delete listeners[id];\n    };\n}\nfunction notifyListeners(data, source) {\n    // eslint-disable-next-line no-shadow\n    Object.keys(listeners).forEach(function (listenerId) {\n        if (listeners[listenerId]) {\n            try {\n                listeners[listenerId](data, source);\n            }\n            catch (e) {\n                /**/\n            }\n        }\n    });\n}\nfunction notifyFrames(message) {\n    var rawMessage = JSON.parse(JSON.stringify(message));\n    bundlers.forEach(function (origin, frame) {\n        if (frame && frame.postMessage) {\n            frame.postMessage(__assign(__assign({}, rawMessage), { codesandbox: true }), origin);\n        }\n    });\n}\nfunction eventListener(e) {\n    if (e.data.type === 'initialized' || isStandalone) {\n        // iframe handshake is auto-resolved in the parent, only the child needs to wait for it\n        // we detect the parent either by the \"initialized\" message which only the parent receives\n        // or by the \"isStandalone\" flag which works for codesandbox.io and when sandpack is not inside an iframe\n        iframeHandshakeDone = true;\n    }\n    if (!iframeHandshakeDone) {\n        return;\n    }\n    var data = e.data;\n    if (data &&\n        data.codesandbox &&\n        (parentOrigin === null || e.origin === parentOrigin) &&\n        (data.$id == null || parentId === null || parentId === data.$id)) {\n        notifyListeners(data, e.source);\n    }\n}\n/**\n * Register an window as a output the `dispatch` function can send messages to.\n *\n * @param frame\n */\nfunction registerFrame(frame, origin, bundlerId) {\n    bundlers.set(frame, origin);\n    frame.postMessage({\n        type: 'register-frame',\n        origin: document.location.origin,\n        id: bundlerId,\n    }, origin);\n}\nif (typeof window !== 'undefined') {\n    window.addEventListener('message', eventListener);\n}\nfunction reattach() {\n    window.addEventListener('message', eventListener);\n}\n\n// Errors\n\nexport { Protocol, transformError, clearErrorTransformers, registerErrorTransformer, actions, isStandalone, iframeHandshake, resetState, dispatch, listen, notifyListeners, registerFrame, reattach };\n//# sourceMappingURL=codesandbox.es5.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isServer = void 0;\nconst SERVER_TEMPLATE_NAMES = [\n    'adonis',\n    'apollo',\n    'docusaurus',\n    'ember',\n    'gatsby',\n    'gridsome',\n    'marko',\n    'mdx-deck',\n    'nest',\n    'next',\n    'node',\n    'nuxt',\n    'quasar',\n    'remix',\n    'sapper',\n    'styleguidist',\n    'unibit',\n    'vuepress',\n];\nexports.isServer = (template) => SERVER_TEMPLATE_NAMES.indexOf(template) !== -1;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.dashboard = exports.teamInviteLink = exports.getSandboxId = exports.privacyUrl = exports.tosUrl = exports.curatorUrl = exports.patronUrl = exports.searchUrl = exports.gitHubToSandboxUrl = exports.optionsToParameterizedUrl = exports.githubRepoUrl = exports.profileLikesUrl = exports.profileSandboxesUrl = exports.teamOverviewUrl = exports.exploreUrl = exports.dashboardUrl = exports.profileUrl = exports.signInVercelUrl = exports.signInUrl = exports.signInPageUrl = exports.forkSandboxUrl = exports.frameUrl = exports.embedUrl = exports.sandboxUrl = exports.editorUrl = exports.uploadFromCliUrl = exports.newCxJSSandboxUrl = exports.newAngularSandboxUrl = exports.newSvelteSandboxUrl = exports.importFromGitHubUrl = exports.newVueSandboxUrl = exports.newPreactSandboxUrl = exports.newDojoSandboxUrl = exports.newReactTypeScriptSandboxUrl = exports.parcelSandboxUrl = exports.newSandboxUrl = exports.newSandboxWizard = exports.protocolAndHost = exports.host = exports.gitHubRepoPattern = void 0;\nconst is_server_1 = require(\"../templates/helpers/is-server\");\nconst dashboard = __importStar(require(\"./url-generator/dashboard\"));\nexports.dashboard = dashboard;\nexports.gitHubRepoPattern = /(https?:\\/\\/)?((www.)?)github.com(\\/[\\w-]+){2,}/;\nconst gitHubPrefix = /(https?:\\/\\/)?((www.)?)github.com/;\nconst dotGit = /(\\.git)$/;\nconst sandboxHost = {\n    'https://codesandbox.io': 'https://csb.app',\n    'https://codesandbox.stream': 'https://codesandbox.dev',\n};\nconst buildEncodedUri = (strings, ...values) => strings[0] +\n    values\n        .map((value, i) => `${encodeURIComponent(value)}${strings[i + 1]}`)\n        .join('');\nexports.host = () => {\n    if (process.env.NODE_ENV === 'production') {\n        return process.env.CODESANDBOX_HOST.split('//')[1];\n    }\n    if (process.env.LOCAL_SERVER) {\n        return 'localhost:3000';\n    }\n    return process.env.DEV_DOMAIN;\n};\nexports.protocolAndHost = () => `${location.protocol}//${exports.host()}`;\nexports.newSandboxWizard = () => `/s`;\nexports.newSandboxUrl = () => `/s/new`;\nexports.parcelSandboxUrl = () => `/s/vanilla`;\nexports.newReactTypeScriptSandboxUrl = () => `/s/react-ts`;\nexports.newDojoSandboxUrl = () => `/s/github/dojo/dojo-codesandbox-template`;\nexports.newPreactSandboxUrl = () => `/s/preact`;\nexports.newVueSandboxUrl = () => `/s/vue`;\nexports.importFromGitHubUrl = () => `/s/github`;\nexports.newSvelteSandboxUrl = () => `/s/svelte`;\nexports.newAngularSandboxUrl = () => `/s/angular`;\nexports.newCxJSSandboxUrl = () => `/s/github/codaxy/cxjs-codesandbox-template`;\nexports.uploadFromCliUrl = () => `/s/cli`;\nconst sandboxGitUrl = (git) => buildEncodedUri `github/${git.username}/${git.repo}/tree/${git.branch}/` +\n    git.path;\nexports.editorUrl = () => `/s/`;\nexports.sandboxUrl = (sandboxDetails) => {\n    if (sandboxDetails.git) {\n        const { git } = sandboxDetails;\n        return `${exports.editorUrl()}${sandboxGitUrl(git)}`;\n    }\n    if (sandboxDetails.alias) {\n        return `${exports.editorUrl()}${sandboxDetails.alias}`;\n    }\n    return `${exports.editorUrl()}${sandboxDetails.id}`;\n};\nexports.embedUrl = (sandbox) => {\n    if (sandbox.git) {\n        const { git } = sandbox;\n        return `/embed/${sandboxGitUrl(git)}`;\n    }\n    if (sandbox.alias) {\n        return `/embed/${sandbox.alias}`;\n    }\n    return `/embed/${sandbox.id}`;\n};\nconst stagingFrameUrl = (shortid, path) => {\n    const stagingHost = (process.env.CODESANDBOX_HOST\n        ? process.env.CODESANDBOX_HOST\n        : '').split('//')[1];\n    const segments = stagingHost.split('.');\n    const first = segments.shift();\n    return `${location.protocol}//${first}-${shortid}.${segments.join('.')}/${path}`;\n};\nexports.frameUrl = (sandbox, append = '', { useFallbackDomain = false, port = undefined, } = {}) => {\n    const path = append.indexOf('/') === 0 ? append.substr(1) : append;\n    const templateIsServer = is_server_1.isServer(sandbox.template);\n    if (process.env.LOCAL_SERVER) {\n        if (templateIsServer) {\n            return `${location.protocol}//${sandbox.id}${port ? `-${port}` : ''}.${templateIsServer ? 'sse.' : ''}${process.env.STAGING_API ? 'codesandbox.stream' : 'codesandbox.io'}/${path}`;\n        }\n        return `http://localhost:3002/${path}`;\n    }\n    if (process.env.STAGING) {\n        return stagingFrameUrl(sandbox.id, path);\n    }\n    let sHost = exports.host();\n    if (`https://${sHost}` in sandboxHost &&\n        !useFallbackDomain &&\n        !templateIsServer) {\n        sHost = sandboxHost[`https://${sHost}`].split('//')[1];\n    }\n    return `${location.protocol}//${sandbox.id}${port ? `-${port}` : ''}.${templateIsServer ? 'sse.' : ''}${sHost}/${path}`;\n};\nexports.forkSandboxUrl = (sandbox) => `${exports.sandboxUrl(sandbox)}/fork`;\nexports.signInPageUrl = (redirectTo) => {\n    let url = `/signin`;\n    if (redirectTo) {\n        url += '?continue=' + redirectTo;\n    }\n    return url;\n};\nexports.signInUrl = (extraScopes = false) => '/auth/github' +\n    (extraScopes ? '?scope=user:email,public_repo,workflow' : '');\nexports.signInVercelUrl = () => '/auth/vercel';\nexports.profileUrl = (username) => `/u/${username}`;\nexports.dashboardUrl = () => `/dashboard`;\nexports.exploreUrl = () => `/explore`;\nexports.teamOverviewUrl = (teamId) => `/dashboard/teams/${teamId}`;\nexports.profileSandboxesUrl = (username, page) => `${exports.profileUrl(username)}/sandboxes${page ? `/${page}` : ''}`;\nexports.profileLikesUrl = (username, page) => `${exports.profileUrl(username)}/likes${page ? `/${page}` : ''}`;\nexports.githubRepoUrl = ({ repo, branch, username, path, }) => buildEncodedUri `https://github.com/${username}/${repo}/tree/${branch}/` +\n    path;\nexports.optionsToParameterizedUrl = (options) => {\n    const keyValues = Object.keys(options)\n        .sort()\n        .filter(a => options[a])\n        .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(options[key])}`)\n        .join('&');\n    return keyValues ? `?${keyValues}` : '';\n};\nexports.gitHubToSandboxUrl = (githubUrl) => githubUrl.replace(gitHubPrefix, '/s/github').replace(dotGit, '');\nexports.searchUrl = (query) => `/search${query ? `?query=${query}` : ''}`;\nexports.patronUrl = () => `/patron`;\nexports.curatorUrl = () => `/curator`;\nexports.tosUrl = () => `/legal/terms`;\nexports.privacyUrl = () => `/legal/privacy`;\nfunction getSandboxId() {\n    const csbHost = process.env.CODESANDBOX_HOST;\n    if (process.env.LOCAL_SERVER) {\n        return document.location.hash.replace('#', '');\n    }\n    if (process.env.STAGING) {\n        const segments = csbHost.split('//')[1].split('.');\n        const first = segments.shift();\n        const re = RegExp(`${first}-(.*)\\\\.${segments.join('\\\\.')}`);\n        return document.location.host.match(re)[1];\n    }\n    let result;\n    [csbHost, sandboxHost[csbHost]].filter(Boolean).forEach(tryHost => {\n        const hostRegex = tryHost.replace(/https?:\\/\\//, '').replace(/\\./g, '\\\\.');\n        const sandboxRegex = new RegExp(`(.*)\\\\.${hostRegex}`);\n        const matches = document.location.host.match(sandboxRegex);\n        if (matches) {\n            result = matches[1];\n        }\n    });\n    if (!result) {\n        throw new Error(`Can't detect sandbox ID from the current URL`);\n    }\n    return result;\n}\nexports.getSandboxId = getSandboxId;\nexports.teamInviteLink = (inviteToken) => `${exports.protocolAndHost()}/invite/${inviteToken}`;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.discoverSearch = exports.discover = exports.search = exports.createTeam = exports.teamInvite = exports.permissionSettings = exports.registrySettings = exports.settings = exports.home = exports.liked = exports.shared = exports.deleted = exports.recents = exports.templates = exports.alwaysOn = exports.repos = exports.drafts = exports.allSandboxes = exports.ALL_SANDBOXES_URL_PREFIX = exports.DASHBOARD_URL_PREFIX = void 0;\nexports.DASHBOARD_URL_PREFIX = '/dashboard';\nexports.ALL_SANDBOXES_URL_PREFIX = `${exports.DASHBOARD_URL_PREFIX}/all`;\nfunction appendTeamIdQueryParam(url, teamId) {\n    if (teamId) {\n        return `${url}?workspace=${teamId}`;\n    }\n    return url;\n}\nfunction sanitizePath(path) {\n    return path\n        .split('/')\n        .map(p => p.split(' ').map(encodeURIComponent).join(' '))\n        .join('/');\n}\nexports.allSandboxes = (path, teamId) => appendTeamIdQueryParam(`${exports.ALL_SANDBOXES_URL_PREFIX}${sanitizePath(path)}`, teamId);\nexports.drafts = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/drafts`, teamId);\nexports.repos = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/repositories`, teamId);\nexports.alwaysOn = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/always-on`, teamId);\nexports.templates = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/templates`, teamId);\nexports.recents = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/recent`, teamId);\nexports.deleted = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/deleted`, teamId);\nexports.shared = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/shared`, teamId);\nexports.liked = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/liked`, teamId);\nexports.home = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/home`, teamId);\nexports.settings = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/settings`, teamId);\nexports.registrySettings = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/settings/npm-registry`, teamId);\nexports.permissionSettings = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/settings/permissions`, teamId);\nexports.teamInvite = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/settings/invite`, teamId);\nexports.createTeam = (teamId) => appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/settings/new`, teamId);\nexports.search = (query, teamId) => {\n    let searchUrl = appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/search`, teamId);\n    if (searchUrl.includes('?')) {\n        searchUrl += '&';\n    }\n    else {\n        searchUrl += '?';\n    }\n    searchUrl += `query=${query}`;\n    return searchUrl;\n};\nexports.discover = (teamId, albumId) => {\n    if (albumId) {\n        return appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/discover/${albumId}`, teamId);\n    }\n    return appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/discover`, teamId);\n};\nexports.discoverSearch = (query, teamId) => {\n    let searchUrl = appendTeamIdQueryParam(`${exports.DASHBOARD_URL_PREFIX}/discover/search`, teamId);\n    if (searchUrl.includes('?'))\n        searchUrl += '&';\n    else\n        searchUrl += '?';\n    searchUrl += `query=${query}`;\n    return searchUrl;\n};\n","import { protocolAndHost } from '@codesandbox/common/lib/utils/url-generator';\n\nconst PREVIEW_SECRET_COOKIE_NAME = 'csb_sandbox_secret';\n\nexport const getPreviewSecret = () =>\n  document.cookie.replace(\n    new RegExp(\n      `(?:(?:^|.*;\\\\s*)${PREVIEW_SECRET_COOKIE_NAME}\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$`\n    ),\n    '$1'\n  );\n\nexport const setPreviewSecret = secret => {\n  if (secret === null) {\n    return;\n  }\n\n  const cookieValue = getPreviewSecret();\n  if (\n    (cookieValue && !secret) ||\n    (secret && !cookieValue) ||\n    cookieValue !== secret\n  ) {\n    if (secret) {\n      document.cookie = `${PREVIEW_SECRET_COOKIE_NAME}=${secret};samesite=none;secure;`;\n\n      setTimeout(() => {\n        location.reload();\n      }, 1000);\n    } else {\n      document.cookie = `${PREVIEW_SECRET_COOKIE_NAME}=; expires=Thu, 01 Jan 1970 00:00:01 GMT;`;\n    }\n  }\n};\n\nexport const listenForPreviewSecret = () => {\n  const listener = data => {\n    if (data.data && data.data.$type === 'preview-secret') {\n      const { previewSecret } = data.data;\n      setPreviewSecret(previewSecret);\n    }\n  };\n\n  window.addEventListener('message', listener);\n\n  return () => {\n    window.removeEventListener('message', listener);\n  };\n};\n\nfunction getPopupOffset({ width, height }) {\n  const wLeft = window.screenLeft ? window.screenLeft : window.screenX;\n  const wTop = window.screenTop ? window.screenTop : window.screenY;\n\n  const left = wLeft + window.innerWidth / 2 - width / 2;\n  const top = wTop + window.innerHeight / 2 - height / 2;\n\n  return { top, left };\n}\n\nfunction getPopupSize() {\n  return { width: 1020, height: 618 };\n}\n\nfunction getPopupDimensions() {\n  const { width, height } = getPopupSize();\n  const { top, left } = getPopupOffset({ width, height });\n\n  return `width=${width},height=${height},top=${top},left=${left}`;\n}\n\n/**\n * This helper function is purely there to also work when we're building\n * for SSE, which means that the env vars are not set and we thus don't\n * know the host.\n */\nfunction getProtocolAndHostWithSSE() {\n  if (process.env.CODESANDBOX_HOST) {\n    return protocolAndHost();\n  }\n\n  if (document.location.host.endsWith('.stream')) {\n    return 'https://codesandbox.stream';\n  }\n\n  return 'https://codesandbox.io';\n}\n\nexport const requestPreviewSecretFromApp = sandboxId => {\n  const host = getProtocolAndHostWithSSE();\n  const popup = window.open(\n    host + '/auth/sandbox/' + sandboxId,\n    name,\n    `scrollbars=no,toolbar=no,location=no,titlebar=no,directories=no,status=no,menubar=no, ${getPopupDimensions()}`\n  );\n\n  setInterval(() => {\n    popup.postMessage({ $type: 'request-preview-secret' }, host);\n  }, 500);\n\n  const listener = e => {\n    if (e.data && e.data.$type === 'preview-secret') {\n      setPreviewSecret(e.data.previewSecret);\n      window.removeEventListener('message', listener);\n\n      popup.close();\n    }\n  };\n  window.addEventListener('message', listener);\n};\n"],"sourceRoot":""}